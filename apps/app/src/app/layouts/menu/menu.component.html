<div class="menu" [class.is-mobile]="mobileQuery.matches" role="link">
  <mat-toolbar class="menu-header" (click)="toggleMenu()" mat-icon-button>
    <div class="info-container">
      <img [src]="workspace.photo" />
      <strong class="font-outfit">{{ workspace.name }}</strong>
    </div>
  </mat-toolbar>

  <div class="cdk-overlay-container" *ngIf="showMenu">
    <div
      class="cdk-overlay-backdrop cdk-overlay-transparent-backdrop cdk-overlay-backdrop-showing"
      (click)="toggleMenu()"
    ></div>
    <div
      class="cdk-overlay-connected-position-bounding-box"
      style="top: 0rem; left: 12.5rem"
    >
      <div class="cdk-overlay-pane auth-menu">
        <div class="item" [routerLink]="['./', workspace._id, 'settings']">
          <img src="../../../assets/icons/setting.svg" alt="Settings" />
          <span class="font-outfit">settings</span>
        </div>
        <div class="item" routerLink="/">
          <img src="../../../assets/icons/swap.svg" alt="Switch workspace" />
          <span class="font-outfit">switch workspace</span>
        </div>
      </div>
    </div>
  </div>

  <mat-sidenav-container
    class="sidenav-container"
    [style.marginTop.px]="mobileQuery.matches ? 56 : 0"
    role="link"
  >
    <mat-sidenav-content class="nav-content">
      <div class="workspace-info">
        <div class="full-width">
          <div class="text-container">
            <strong class="font-outfit">Workspace usage</strong>
          </div>

          <div class="usage">
            <mat-progress-bar
              mode="determinate"
              value="30"
              class="full-width"
            ></mat-progress-bar>
            <strong class="font-outfit">{{ workspaceUsage }}%</strong>
          </div>

          <div class="divider"><hr /></div>
        </div>

        <div class="full-width">
          <div class="text-container">
            <strong class="font-outfit">Workspace members</strong>
          </div>

          <div class="members">
            <ng-container *ngFor="let user of usersId; let i = index">
              <ng-container *ngIf="i < 2">
                <ng-container *ngIf="user.photo">
                  <img [src]="user.photo" />
                </ng-container>
                <ng-container *ngIf="!user.photo">
                  <div class="initials" [style.background-color]="background">
                    {{ getInitials(user.name) }}
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
            <ng-container *ngIf="remainingUsersCount > 0">
              <div class="more-users" [style.background-color]="background">
                {{ remainingUsersCount }}+
              </div>
              <button (click)="onRedirect()" class="add-user">
                <mat-icon svgIcon="whiteUser"></mat-icon>
              </button>
            </ng-container>
          </div>

          <div class="divider"><hr /></div>
        </div>
      </div>

      <div class="workspaces-links">
        <div
          class="menu-item"
          id="overview"
          *ngFor="let menuItem of menuItems"
          [routerLink]="['./', workspace._id, menuItem.path]"
          [routerLinkActive]="['active']"
        >
          <div class="icon">
            <img [src]="menuItem.icon" [title]="menuItem.text" />
          </div>
          <div class="content">
            <span class="font-outfit">{{ menuItem.text }}</span>
          </div>
        </div>
      </div>

      <div class="personal-data">
        <img [src]="user.photo" />
        <div class="person-name">
          <strong class="font-outfit">{{ user.name }}</strong>
        </div>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
  <mat-toolbar class="workspace-info menu-footer">
    <img
      src="../../../assets/icons/logout.svg"
      title="LogOut"
      (click)="onLogOut()"
    />
  </mat-toolbar>
</div>
